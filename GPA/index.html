<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic GPA & CGPA Hub</title>
    <style>
        :root {
            --primary: 262 83% 58%;
            --accent: 142 76% 36%;
            --background: 195 100% 98%;
            --border: 220 13% 91%;
            --card: 0 0% 100%;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: hsl(var(--background));
            margin: 0; padding: 2rem 1rem;
            display: flex; justify-content: center;
        }

        .container { width: 100%; max-width: 750px; }

        .header {
            background: linear-gradient(135deg, hsl(var(--primary)), #9333ea);
            color: white; padding: 2.5rem; border-radius: 1.5rem;
            text-align: center; margin-bottom: 2rem;
            box-shadow: 0 10px 25px -10px rgba(124, 58, 237, 0.5);
        }

        .tabs {
            display: flex; gap: 1rem; margin-bottom: 2rem;
        }

        .tab-btn {
            flex: 1; padding: 1rem; border-radius: 0.75rem;
            border: 2px solid transparent;
            background: #e2e8f0; cursor: pointer;
            font-weight: 700; color: #475569; transition: 0.3s;
        }

        .tab-btn.active {
            border-color: hsl(var(--primary));
            color: hsl(var(--primary));
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .card {
            background: white; border-radius: 1rem; padding: 1.5rem;
            margin-bottom: 1.5rem; border: 1px solid hsl(var(--border));
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            animation: slideUp 0.4s ease-out;
        }

        .subject-row {
            display: grid; grid-template-columns: 1.5fr 1.5fr 40px;
            gap: 1rem; margin-bottom: 0.75rem; align-items: center;
        }

        .cgpa-row {
            display: grid; grid-template-columns: 1fr 2fr;
            gap: 1.5rem; margin-bottom: 1rem; padding: 1rem;
            background: #f8fafc; border-radius: 0.75rem;
            align-items: center;
        }

        select, input {
            padding: 0.7rem; border: 1.5px solid hsl(var(--border));
            border-radius: 0.5rem; width: 100%; font-size: 1rem;
        }

        .btn {
            cursor: pointer; padding: 0.8rem 1.5rem; border-radius: 0.6rem;
            border: none; font-weight: 600; transition: 0.2s;
        }

        .btn-primary { background: hsl(var(--primary)); color: white; width: 100%; }
        .btn-primary:hover { filter: brightness(1.1); transform: translateY(-1px); }

        .btn-add { background: #f1f5f9; color: #475569; width: 100%; margin: 10px 0; border: 1px dashed #cbd5e1; }
        .btn-reset { background: #fee2e2; color: #ef4444; }

        .result-box {
            margin-top: 1.5rem; padding: 1.5rem; border-radius: 0.75rem;
            text-align: center; font-weight: bold; border: 2px solid transparent;
        }

        .sgpa-res { background: #eef2ff; color: #4338ca; border-color: #c7d2fe; font-size: 1.5rem; }
        .cgpa-res { background: #f0fdf4; color: #166534; border-color: #bbf7d0; font-size: 2.2rem; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1 style="margin:0">Academic GPA & CGPA Hub</h1>
        <p style="margin:5px 0 0; opacity:0.8">Calculate SGPAs and CGPA up to 8th Semester</p>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('sgpa')">SGPA Calculator</button>
        <button class="tab-btn" onclick="switchTab('cgpa')">CGPA Calculator</button>
    </div>

    <div id="sgpa-tab" class="tab-content">
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                <h3 style="margin:0">Semester Subject Entry</h3>
                <button class="btn btn-reset" onclick="resetSGPA()">Clear subjects</button>
            </div>
            
            <div id="sgpa-items"></div>
            
            <button class="btn btn-add" onclick="addSGPASubject()">+ Add Another Subject</button>
            <button class="btn btn-primary" style="margin-top:1rem" onclick="calculateSGPA()">Calculate Semester SGPA</button>
            
            <div id="sgpa-display" class="result-box sgpa-res" style="display:none;">
                <span style="font-size: 0.9rem; display:block; opacity:0.8">SEMESTER SGPA</span>
                <span id="sgpa-val">0.00</span>
            </div>
        </div>
    </div>

    <div id="cgpa-tab" class="tab-content" style="display:none;">
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                <h3 style="margin:0">Cumulative Summary</h3>
                <button class="btn btn-reset" onclick="resetCGPA()">Reset All Semesters</button>
            </div>

            <label style="font-weight:bold; color:#64748b; margin-bottom:10px; display:block;">Select Your Current Semester:</label>
            <select id="cgpa-select" onchange="generateCGPARows()">
                <option value="0">Choose up to 8th Semester</option>
                <option value="1">1st Semester</option>
                <option value="2">2nd Semester</option>
                <option value="3">3rd Semester</option>
                <option value="4">4th Semester</option>
                <option value="5">5th Semester</option>
                <option value="6">6th Semester</option>
                <option value="7">7th Semester</option>
                <option value="8">8th Semester</option>
            </select>

            <div id="cgpa-inputs-list" style="margin-top:1.5rem"></div>

            <button id="cgpa-btn" class="btn btn-primary" style="display:none; margin-top:1rem" onclick="calculateCGPA()">Calculate Overall CGPA</button>

            <div id="cgpa-display" class="result-box cgpa-res" style="display:none;">
                <span style="font-size: 0.9rem; display:block; opacity:0.8">CUMULATIVE CGPA</span>
                <span id="cgpa-val-final">0.00</span>
            </div>
        </div>
    </div>
</div>

<script>
    const gradePoints = { 'O': 10, 'A+': 9, 'A': 8, 'B+': 7, 'B': 6, 'C': 5, 'F': 0 };
    let sgpaData = JSON.parse(localStorage.getItem('sgpa_items')) || [{ id: Date.now(), credits: 3, grade: 'A' }];

    function switchTab(mode) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
        
        if(mode === 'sgpa') {
            document.getElementById('sgpa-tab').style.display = 'block';
            document.querySelectorAll('.tab-btn')[0].classList.add('active');
        } else {
            document.getElementById('cgpa-tab').style.display = 'block';
            document.querySelectorAll('.tab-btn')[1].classList.add('active');
        }
    }

    // --- SGPA CALCULATOR ---
    function addSGPASubject() {
        sgpaData.push({ id: Date.now(), credits: 3, grade: 'A' });
        renderSGPA();
    }

    function removeSGPASubject(id) {
        sgpaData = sgpaData.filter(item => item.id !== id);
        renderSGPA();
    }

    function renderSGPA() {
        const list = document.getElementById('sgpa-items');
        list.innerHTML = sgpaData.map(item => `
            <div class="subject-row">
                <select onchange="updateSGPAItem(${item.id}, 'credits', this.value)">
                    <option value="1" ${item.credits == 1 ? 'selected' : ''}>1 Credit</option>
                    <option value="2" ${item.credits == 2 ? 'selected' : ''}>2 Credits</option>
                    <option value="3" ${item.credits == 3 ? 'selected' : ''}>3 Credits</option>
                    <option value="4" ${item.credits == 4 ? 'selected' : ''}>4 Credits</option>
                </select>
                <select onchange="updateSGPAItem(${item.id}, 'grade', this.value)">
                    ${Object.keys(gradePoints).map(g => `<option value="${g}" ${item.grade == g ? 'selected' : ''}>Grade ${g}</option>`).join('')}
                </select>
                <button style="background:none; border:none; color:#cbd5e1; cursor:pointer; font-size:1.5rem" onclick="removeSGPASubject(${item.id})">Ã—</button>
            </div>
        `).join('');
        localStorage.setItem('sgpa_items', JSON.stringify(sgpaData));
    }

    function updateSGPAItem(id, key, val) {
        const item = sgpaData.find(i => i.id === id);
        item[key] = key === 'credits' ? parseInt(val) : val;
        localStorage.setItem('sgpa_items', JSON.stringify(sgpaData));
    }

    function calculateSGPA() {
        let pts = 0, cr = 0;
        sgpaData.forEach(s => {
            pts += (gradePoints[s.grade] * s.credits);
            cr += s.credits;
        });
        const sgpa = cr > 0 ? (pts / cr).toFixed(2) : "0.00";
        document.getElementById('sgpa-display').style.display = 'block';
        document.getElementById('sgpa-val').innerText = sgpa;
    }

    function resetSGPA() {
        if(confirm("Clear current subject entries?")) {
            sgpaData = [{ id: Date.now(), credits: 3, grade: 'A' }];
            document.getElementById('sgpa-display').style.display = 'none';
            renderSGPA();
        }
    }

    // --- CGPA CALCULATOR ---
    function generateCGPARows() {
        const count = parseInt(document.getElementById('cgpa-select').value);
        const list = document.getElementById('cgpa-inputs-list');
        const btn = document.getElementById('cgpa-btn');
        list.innerHTML = '';
        
        if(count === 0) {
            btn.style.display = 'none';
            document.getElementById('cgpa-display').style.display = 'none';
            return;
        }
        
        btn.style.display = 'block';
        for(let i = 1; i <= count; i++) {
            list.innerHTML += `
                <div class="cgpa-row">
                    <label style="font-weight:600; color:#475569">Sem ${i} SGPA:</label>
                    <input type="number" class="cgpa-input" step="0.01" min="0" max="10" placeholder="e.g. 8.50">
                </div>
            `;
        }
    }

    function calculateCGPA() {
        const inputs = document.querySelectorAll('.cgpa-input');
        let total = 0, count = 0;
        inputs.forEach(input => {
            if(input.value && !isNaN(parseFloat(input.value))) {
                total += parseFloat(input.value);
                count++;
            }
        });
        
        const cgpa = count > 0 ? (total / count).toFixed(2) : "0.00";
        document.getElementById('cgpa-display').style.display = 'block';
        document.getElementById('cgpa-val-final').innerText = cgpa;
    }

    function resetCGPA() {
        if(confirm("Clear all CGPA data?")) {
            document.getElementById('cgpa-select').value = 0;
            document.getElementById('cgpa-inputs-list').innerHTML = '';
            document.getElementById('cgpa-display').style.display = 'none';
            document.getElementById('cgpa-btn').style.display = 'none';
        }
    }

    renderSGPA();
</script>
</body>
</html>
